
@{
    ViewBag.Title = "Nueva Devolucion";
}

@Html.Partial("_nav_secundario")
@Html.Partial("_scriptsDevoluciones")
<style>
    #divPanelNroComprobante {
        padding-bottom: 10px;
        border-bottom: 1px solid #999;
        margin-bottom: 1em;
    }
    #divPanelNroComprobante input, #divPanelNroComprobante select {
        margin-bottom: 15px !important;
    }
    .table thead tr th {
        padding: 11px 5px !important;
        border-right: 1px solid #cecece;
        vertical-align: middle;
        font-weight: 400 !important;
        font-size: 11px !important;
        line-height: 11px;
        color: #fff !important;
        border-bottom: none !important;
    }
    .tablaDevoluciones thead tr th:last-child {
        border-right: none !important;
    }
    .tablaDevoluciones {
        border-bottom: 2px solid #34495e;
    }
    .botonera_dev {
        background: #fff;
        padding: 1em;
    }
</style>
<h3>Devolución Normal</h3>
<p>Por favor, complete los datos del formulario para poder realizar una nueva DEVOLUCIÓN.</p>
<div class="row">
    <div class="col-xs-12 padding_l-10">
        <div class="clear15"></div>
        <div id="divPanelNroComprobante">
            <div class="col-xs-12 col-sm-3">
                <label for="cmbMotivo">Motivo</label>
                <input type="text" name="cmbMotivo" id="cmbMotivo" list="MotivoValues" class="form-control" />
                @{ 
                    int nroCliente = ((Kellerhoff.Codigo.capaDatos.cClientes)System.Web.HttpContext.Current.Session["clientesDefault_Cliente"]).cli_codigo;

                    <input type="hidden" name="txtNroCliente" id="txtNroCliente" value="@{ WriteLiteral(nroCliente); }" />
                }
                <datalist id="MotivoValues">
                    <option value="Bien facturado mal enviado" data-id="1">
                    <option value="No pedido" data-id="2">
                    <option value="Producto con falla de laboratorio" data-id="3">
                    <option value="Producto con vencimiento corto" data-id="4">
                    <option value="Producto de más sin ser facturado" data-id="5">
                    <option value="Producto roto" data-id="6">
                    <option value="Producto vacío" data-id="7">
                    <option value="Transfer equívoco" data-id="8">
                </datalist>
            </div>
            <div class="col-md-2 col-sm-3 col-xs-5 hidden" id="DEVTipoComprobante">
                <label for="cmbTipoComprobante">Comprobante</label>
                <input type="text" name="cmbTipoComprobante" id="cmbTipoComprobante" class="form-control" list="TipoCbteValues" />
                <datalist id="TipoCbteValues">
                    @{
                        if (Session["ConsultaDeComprobantes_tipoComprobante"] != null)
                        {
                            string strTipoComprobante_option = string.Empty;
                            int cont = 0;
                            foreach (string item in ((List<string>)Session["ConsultaDeComprobantes_tipoComprobante"]))
                            {
                                if (item.Substring(0, 3) == "FAC")
                                {
                                    strTipoComprobante_option += "<option value=\"" + item + "\"  data-id=\"" + cont + "\">";
                                    cont++;
                                }
                            }
                            WriteLiteral(strTipoComprobante_option);
                        }
                    }
                </datalist>
            </div>
            <div class="col-lg-2 col-md-2 col-sm-3 col-xs-7 hidden" id="DEVNroComprobante">
                <label for="txtNroComprobante">Nro</label>
                <input id="txtNroComprobante" type="text" class="form-control" />
            </div>
            <div class="clear"></div>
            <div class="col-sm-3 col-xs-12 hidden" id="DEVFactura">
                <label for="cmbNombreProducto">Producto Facturado</label>
                <input type="text" name="cmbNombreProducto" id="cmbNombreProducto" class="form-control" list="NombreProductoValues" />
                <datalist id="NombreProductoValues"></datalist>
            </div>
            <div class="col-sm-3 col-xs-12 hidden" id="DEVDevolver">
                <label for="txtNombreProductoDev">Producto a Devolver</label>
                <input type="text" id="txtNombreProductoDev" name="txtNombreProductoDev" class="form-control">
            </div>
            <div class="col-sm-2 col-lg-1 col-xs-4 hidden" id="DEVCant" style="text-align:right;">
                <label for="txtCantDevolver" style="text-align:right;">Cantidad</label>
                <input type="text" id="txtCantDevolver" name="txtCantDevolver" class="form-control" style="text-align:right;">
            </div>
            <div class="col-sm-2 col-xs-4 hidden" id="DEVLote" style="text-align:right;">
                <label for="txtNumeroLote">Nro. Lote</label>
                <input type="text" id="txtNumeroLote" name="txtNumeroLote" class="form-control" style="text-align:right;">
            </div>
            <div class="col-sm-2 col-lg-1 col-xs-4 hidden" id="DEVLoteVenc" style="text-align:right;">
                <label for="txtNumeroLote">Vencimiento</label>
                <input type="text" id="txtNumeroLoteVenc" name="txtNumeroLoteVenc" class="form-control" style="text-align:right;">
            </div>
            <div class="col-sm-2 col-xs-4 pull-right text-right hidden" id="DEVAgregar">
                <label style="color:#ededed;">Boton</label>
                <button class="btn btn-primary btn-block btnAgregarDev" id="btnAgregarDev" disabled>
                    AGREGAR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <i class="fa fa-caret-right"></i>
                </button>
            </div>
            <div class="clear"></div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12 padding_l-10 table-responsive">
        <h3>Devoluciones Precargadas</h3>
        <table class="table table-striped tablaDevoluciones">
            <thead>
                <tr>
                    <th>Factura</th>
                    <th>Producto facturado</th>
                    <th>Producto devuelto</th>
                    <th>Motivo</th>
                    <th class="text-center">Cantidad</th>
                    <th>Lote</th>
                    <th>Vencimiento</th>
                    <th></th>
                </tr>
            </thead>
            <tbody id="tblDevolucion"></tbody>
            
        </table>
    </div>
    <div class="col-xs-12 padding_l-10">
        <div class="col-xs-6 botonera_dev">
            <button type="button" class="btn btn-danger btnLimpiarPrecarga" id="btnLimpiarPrecarga">
                <i class="fa fa-trash-o"></i> &nbsp;&nbsp; LIMPIAR
            </button>
        </div>
        <div class="col-xs-6 botonera_dev">
            <button type="button" class="btn btn-primary pull-right btnProcesarPrecarga" id="btnProcesarPrecarga">
                <i class="fa fa-check"></i> &nbsp;&nbsp; CONFIRMAR
            </button>
        </div>
    </div>
</div>